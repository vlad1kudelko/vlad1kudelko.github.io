# Статический генератор сайта на pug и tailwindcss

## Как это работает

Сборка происходит в 2 этапа:

- Сборка верстки на pug
- Сборка стилей на tailwindcss

### Сборка верстки на pug

Алгоритм такой:

- Файлы md сначала парсим на контент и сохраняем в переменную (т.к. во время сборки мы должны иметь url всех файлов в проекте)
- Все остальные файлы сразу копируем в конечную папку и так же сохраняем в переменную (файлы json парсятся, их можно прочитать из шаблона в момент сборки)
- Необходимо указать переменную среды: `DOMAIN` (она используется при создании sitemap)

Структура проекта

```
├── sitegen27/    - файлы генератора
│   ├── www/      - папка монтируется при сборке
│   ├── ...
│   └── start.sh  - скрипт сборки проекта
└── www/
    ├── content   - структура проекта (файлы *.md, *.png и др.)
    ├── public    - конечная папка с результатом сборки
    └── template  - шаблоны страниц *.pug, которые упоминаются в *.md файлах проекта
```

```javascript
/*
    каждая md страница при сборке получает следующие данные
*/
current = {
    '[все поля из toml части]',
    'template',         // [необходимо]  сборщик ожидает это поле (имя шаблона без расширения *.pug, путь относительно папки с шаблонами)
    'publication_date', // [опционально] дата публикации в формате: YYYY-MM-DD (можно не указывать)
    'content',          // [добавляется] контент в html формате
    'url',              // [добавляется] текущий адрес страницы
}
all = [
    { /* объект, аналогичный current */ },
    { /* объект, аналогичный current */ },
    { /* объект, аналогичный current */ },
    // ...
]
other = [
    // тут будут файлы, которые не md
    { 'url': '/example.json', 'content': { 'hello': 'world' } },
    { 'url': '/example.img',  'content': '' },
    // ...
]
```

### Сборка стилей на tailwindcss

Сборка стилей происходит в соответствии с файлом конфигурации `tailwind.config.js`
